<section class="ak_pmap_main" fxLayout="column" fxLayoutAlign="start stretch">
  <mat-sidenav-container fxFlex>
    <mat-sidenav mode="side" align="end" class="mat-elevation-z7"
       fxLayout="column" fxLayoutAlign="start stretch" #sidenav>
      <mat-toolbar fxFlex="none" color="primary">
        <input type="file" multiple="multiple" accept="image/jpeg" 
          [ngStyle]="{'display': 'none'}"  #selectFiles
          (change)="onFilesSelected($event)" />
        <button mat-button (click)="selectFiles.click()">
          <mat-icon>photo</mat-icon>
          Load Photos
        </button>
      </mat-toolbar>
      <div fxFlex="auto" class="image-list">
        <button class="image-button"  *ngFor="let i of images"
            [ngClass]="{'image-selected': i != null && currentImage == i.id }"
            (click)="onImageClick(i)">
          <img class="image" src="{{i != null ? i.dataUrl : ''}}" />
          <div class="image-overlay" fxLayout="row" fxLayoutAlign="space-around center">
              <mat-icon fxFlex="none"> {{i != null && i.latLng != null ? 'location_on' : 'location_off'}} </mat-icon>
            <mat-icon fxFlex="none" [ngStyle]="{'display': i != null && i.saved ? 'block': 'none'}"> save </mat-icon>
              <span class="image-name mat-body-1" fxFlex="auto"> {{i != null ? i.file.name : ''}} </span>
          </div>
        </button>
      </div>
    </mat-sidenav>
    <div class="map_container">
      <map-view #map_view></map-view>
      <div class="drawer-button container">
        <button class="toggle-button"
          [ngClass]="{'open-drawer': !sidenav.opened }"
          (click)="sidenav.opened ? sidenav.close() : sidenav.open()">
        </button>
      </div>
    </div>
  </mat-sidenav-container>
</section>
